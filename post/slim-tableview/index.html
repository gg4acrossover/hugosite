<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Slim tableview - VietHQ - Tìm đơn giản trong phức tạp</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="VietHQ" />
  <meta name="description" content="1.Tản mạn Cách đơn giản nhất để giảm bớt bug là viết code ít đi. Chân lý đó đã được đưa vào một định luật nổi tiếng, hồi phổ thông ai cũng từng kinh qua.
 e = mc2
 Dịch một cách chân phương là error = more code (càng nhiều code càng gây lỗi). Khoảng cách giữa coder và tester phụ thuộc vào việc có bao nhiêu bug sinh ra." />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.52" />


<link rel="canonical" href="https://gg4acrossover.github.io/hugosite/post/slim-tableview/" />

<link rel="apple-touch-icon" sizes="180x180" href="/hugosite/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/hugosite/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/hugosite/favicon-16x16.png">
<link rel="manifest" href="/hugosite/manifest.json">
<link rel="mask-icon" href="/hugosite/safari-pinned-tab.svg" color="#5bbad5">







<link href="/hugosite/dist/even.min.css?v=3.1.1" rel="stylesheet">
<link href="/hugosite/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Slim tableview" />
<meta property="og:description" content="1.Tản mạn Cách đơn giản nhất để giảm bớt bug là viết code ít đi. Chân lý đó đã được đưa vào một định luật nổi tiếng, hồi phổ thông ai cũng từng kinh qua.
 e = mc2
 Dịch một cách chân phương là error = more code (càng nhiều code càng gây lỗi). Khoảng cách giữa coder và tester phụ thuộc vào việc có bao nhiêu bug sinh ra." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gg4acrossover.github.io/hugosite/post/slim-tableview/" /><meta property="article:published_time" content="2017-06-07T16:14:26&#43;07:00"/>
<meta property="article:modified_time" content="2017-06-07T16:14:26&#43;07:00"/>

<meta itemprop="name" content="Slim tableview">
<meta itemprop="description" content="1.Tản mạn Cách đơn giản nhất để giảm bớt bug là viết code ít đi. Chân lý đó đã được đưa vào một định luật nổi tiếng, hồi phổ thông ai cũng từng kinh qua.
 e = mc2
 Dịch một cách chân phương là error = more code (càng nhiều code càng gây lỗi). Khoảng cách giữa coder và tester phụ thuộc vào việc có bao nhiêu bug sinh ra.">


<meta itemprop="datePublished" content="2017-06-07T16:14:26&#43;07:00" />
<meta itemprop="dateModified" content="2017-06-07T16:14:26&#43;07:00" />
<meta itemprop="wordCount" content="568">



<meta itemprop="keywords" content="ios,swift3," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Slim tableview"/>
<meta name="twitter:description" content="1.Tản mạn Cách đơn giản nhất để giảm bớt bug là viết code ít đi. Chân lý đó đã được đưa vào một định luật nổi tiếng, hồi phổ thông ai cũng từng kinh qua.
 e = mc2
 Dịch một cách chân phương là error = more code (càng nhiều code càng gây lỗi). Khoảng cách giữa coder và tester phụ thuộc vào việc có bao nhiêu bug sinh ra."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/hugosite/" class="logo">Vie</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/hugosite/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/hugosite/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/hugosite/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="http://gg4acrossover.github.io/">
        <li class="mobile-menu-item">Hire me</li>
      </a><a href="/hugosite/about/">
        <li class="mobile-menu-item">About me</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/hugosite/" class="logo">Vie</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/hugosite/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="http://gg4acrossover.github.io/">Hire me</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/about/">About me</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Slim tableview</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-06-07 </span>
        
        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#1-tản-mạn">1.Tản mạn</a></li>
<li><a href="#2-make-up">2. Make up</a></li>
<li><a href="#3-kết">3. Kết</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<h3 id="1-tản-mạn">1.Tản mạn</h3>

<p>Cách đơn giản nhất để giảm bớt bug là viết code ít đi. Chân lý đó đã được đưa vào một định luật nổi tiếng, hồi phổ thông ai cũng từng kinh qua.</p>

<blockquote>
<p>e = mc2</p>
</blockquote>

<p><img src="/hugosite/images/note/emc_1x.png" alt="image2" /></p>

<p>Dịch một cách chân phương là error = more code (càng nhiều code càng gây lỗi). Khoảng cách giữa coder và tester phụ thuộc vào việc có bao nhiêu bug sinh ra. Einstein khi đưa ra định luật đó, chắc không ngờ rằng nó có thể dịu dàng đúng (theo một cách mới) với cả ngành IT này. Thế nên viết ngắn đi mà vẫn dễ hiểu luôn luôn được những lười biếng coder coi là tôn chỉ.</p>

<p>Khi sử dụng <em>tableview</em> chúng ta luôn đi theo một format chung, thậm chí gõ đến thuộc lòng, không cần <em>autocomplete</em>.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">self.listTbl.<span style="color:#66d9ef">register</span>( UINib( nibName: String(describing: GGArtistryCell.self), bundle: nil), 
	forCellReuseIdentifier: <span style="color:#e6db74">&#34;cell&#34;</span>)</code></pre></div>

<p>Cả những khi dequeue nữa</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">let cell <span style="color:#f92672">=</span> tableView.dequeueReusableCell(withIdentifier: <span style="color:#e6db74">&#34;cell&#34;</span>, <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> indexPath)</code></pre></div>

<p>Những đoạn code này hơi dài, vậy nên chúng ta, những lười biếng coder, nên làm ngắn nó đi tí.
Mình sẽ sử dụng <strong>protocol</strong> và <strong>generics</strong> để việc đăng kí và dequeue cell ngắn gọn hơn.</p>

<h3 id="2-make-up">2. Make up</h3>

<p>Làm việc với objc, mình hay tạo baseCell có 2 hàm <em>getNib</em> và <em>getNibName</em> (cho identifier) để việc đăng kí cell trở nên ngắn gọn hơn. Tuy nhiên ở swift, mình sẽ sử dụng <strong>protocol</strong>.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc"><span style="color:#75715e">/**
</span><span style="color:#75715e">    cell protocol for uicollectionview, uitableview
</span><span style="color:#75715e"> */</span>
protocol GGBaseCellProtocol {
    <span style="color:#66d9ef">static</span> func getNibName() <span style="color:#f92672">-&gt;</span> String <span style="color:#75715e">// return nibname of cell
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> func getNib() <span style="color:#f92672">-&gt;</span> UINib <span style="color:#75715e">// return nib of cell
</span><span style="color:#75715e"></span>}


<span style="color:#75715e">/**
</span><span style="color:#75715e">    default implement for cell
</span><span style="color:#75715e"> */</span>
extension GGBaseCellProtocol where Self : UIView {
    <span style="color:#75715e">/// collectionView get nibname
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> func getNibName() <span style="color:#f92672">-&gt;</span> String {
        <span style="color:#66d9ef">return</span> String(describing: self)
    }
    
    <span style="color:#75715e">/// collectionView get nib
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> func getNib() <span style="color:#f92672">-&gt;</span> UINib {
        <span style="color:#66d9ef">return</span> UINib.init(nibName: self.getNibName(), bundle: nil)
    }
}</code></pre></div>

<p>Tạo extension cho protocol để ta không phải khai báo đi, khai báo lại 2 hàm <em>getNib</em> và <em>getNibName</em> ở mỗi class implement lại protocol này. Khi đó ta chỉ cần cho custom cell của mình kế thừa lại protocol. Khá là linh động. Code lúc đó sẽ ngắn đi chút ít nhưng nhìn clear hơn.</p>

<p>Ví dụ như thế này</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">self.listTbl.<span style="color:#66d9ef">register</span>(GGArtistryCell.getNib(), 
	forCellReuseIdentifier: GGArtistryCell.getNibName())</code></pre></div>

<p>Khá là đẹp rồi phải không? tuy nhiên ta có thể code ngắn hơn nữa bằng cách sử dụng <strong>generics</strong>.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">extension UITableView {
    func on_register<span style="color:#f92672">&lt;</span> T : GGBaseCellProtocol<span style="color:#f92672">&gt;</span>(type: T.Type)  {
        self.<span style="color:#66d9ef">register</span>(T.getNib(), forCellReuseIdentifier: T.getNibName())
    }
    
    func on_dequeue<span style="color:#f92672">&lt;</span> T : GGBaseCellProtocol<span style="color:#f92672">&gt;</span>(idxPath : IndexPath) <span style="color:#f92672">-&gt;</span> T {
        guard let cell <span style="color:#f92672">=</span> self.dequeueReusableCell(withIdentifier: T.getNibName(), <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> idxPath) as<span style="color:#f92672">?</span> T <span style="color:#66d9ef">else</span> {
            fatalError(<span style="color:#e6db74">&#34;couldnt dequeue cell with identifier \(T.getNibName())&#34;</span>)
        }
        
        <span style="color:#66d9ef">return</span> cell
    }
}</code></pre></div>

<p>Để cho gọn, mình tạo extension cho UITableView, với 2 hàm <em>on_register</em> và <em>on_dequeue</em> làm 2 việc mà ai cũng biết là việc gì rồi.</p>

<p>Khi đó bước đăng kí cell sẽ ngắn đi như sau:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">self.listTbl.on_register(type: GGArtistryCell.self)</code></pre></div>

<p>So với trước thì ngắn gọn đi khá nhiều, coder không phải viết dài dòng nữa.</p>

<p>Tiếp đến là dequeue cũng ngắn không kém phần</p>

<p>Thay vì:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc"><span style="color:#66d9ef">if</span> let cell <span style="color:#f92672">=</span> self.listTbl.dequeueReusableCell(withIdentifier: GGArtistryCell.getNibName(), <span style="color:#66d9ef">for</span><span style="color:#f92672">:</span> indexPath) as<span style="color:#f92672">?</span> GGArtistryCell {
	<span style="color:#75715e">// your code
</span><span style="color:#75715e"></span>}</code></pre></div>

<p>Ta chỉ cần</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">let cell : GGArtistryCell <span style="color:#f92672">=</span> self.listTbl.on_dequeue(idxPath: indexPath)</code></pre></div>

<p>Bây giờ mình đã có thể lười đi tí 😄</p>

<p>Ta có thể áp dụng phương pháp này cho cả collectionView</p>

<h3 id="3-kết">3. Kết</h3>

<p>Lời cuối sẽ là một <a href="https://twitter.com/realbadiostips/status/867791220323500032">siêu tip</a> để code ngắn gọn</p>

<blockquote>
<p>MVC = Most Viable Cocoapod.</p>
</blockquote>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">VietHQ</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2017-06-07</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/hugosite/tags/ios/">ios</a>
          
          <a href="/hugosite/tags/swift3/">swift3</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/hugosite/post/filter-sort-in-action/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Filter, sort in action</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/hugosite/post/tao-api-client-swift-3/">
            <span class="next-text nav-default">Tạo APIClient với swift 3</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'gg4acrossover';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:hoangquocviet1402@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/viet142" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.linkedin.com/in/viethoangquoc1402/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://github.com/gg4acrossover" class="iconfont icon-github" title="github"></a>
  <a href="https://gg4acrossover.github.io/hugosite/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">VietHQ</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/hugosite/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/hugosite/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/hugosite/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/hugosite/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/hugosite/dist/even.min.js?v=3.1.1"></script>










<script>
  var _gaq=[['_setAccount','UA-99127158-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
