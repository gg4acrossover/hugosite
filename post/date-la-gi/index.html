<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Date là gì, có ăn được không? - VietHQ - Tìm đơn giản trong phức tạp</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="VietHQ" />
  <meta name="description" content="Date Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc. Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng." />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.42.1" />


<link rel="canonical" href="https://gg4acrossover.github.io/hugosite/post/date-la-gi/" />

<link rel="apple-touch-icon" sizes="180x180" href="/hugosite/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/hugosite/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/hugosite/favicon-16x16.png">
<link rel="manifest" href="/hugosite/manifest.json">
<link rel="mask-icon" href="/hugosite/safari-pinned-tab.svg" color="#5bbad5">








<link href="/hugosite/dist/even.min.css?v=3.1.1" rel="stylesheet">
<link href="/hugosite/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Date là gì, có ăn được không?" />
<meta property="og:description" content="Date Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc. Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gg4acrossover.github.io/hugosite/post/date-la-gi/" />



<meta property="article:published_time" content="2017-11-06T16:50:29&#43;07:00"/>

<meta property="article:modified_time" content="2017-11-06T16:50:29&#43;07:00"/>











<meta itemprop="name" content="Date là gì, có ăn được không?">
<meta itemprop="description" content="Date Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc. Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng.">


<meta itemprop="datePublished" content="2017-11-06T16:50:29&#43;07:00" />
<meta itemprop="dateModified" content="2017-11-06T16:50:29&#43;07:00" />
<meta itemprop="wordCount" content="657">



<meta itemprop="keywords" content="swift," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Date là gì, có ăn được không?"/>
<meta name="twitter:description" content="Date Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc. Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/hugosite/" class="logo">Vie</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/hugosite/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/hugosite/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/hugosite/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="http://gg4acrossover.github.io/">
        <li class="mobile-menu-item">Hire me</li>
      </a><a href="/hugosite/about/">
        <li class="mobile-menu-item">About me</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/hugosite/" class="logo">Vie</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/hugosite/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="http://gg4acrossover.github.io/">Hire me</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugosite/about/">About me</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Date là gì, có ăn được không?</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-11-06 </span>
        
        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#date">Date</a>
<ul>
<li><a href="#now">Now</a></li>
<li><a href="#convert-time">Convert time</a></li>
<li><a href="#what-is-the-date-today">What is the date today?</a></li>
<li><a href="#show-me-the-date">Show me the date</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<h2 id="date">Date</h2>

<p>Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc.
Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng. Phức tạp hơn, có những nước lớn, thời gian lại phân theo nhiều timezone khác nhau (Nga, Mỹ), đầu quốc gia một giờ, cuối quốc gia lại là một giờ khác. Oh my god!</p>

<p>IOS hỗ trợ làm việc với time tương đối tốt, thậm chí cũng đã có nhiều thư viện đơn giản hóa việc này. Tuy nhiên việc hiểu bản chất của <em>Date</em> cũng giúp bạn suy ra cách thức vận hành của thư viện hoặc có thể tự tạo cho mình một thư viện riêng phù hợp với yêu cầu. Chúng ta gọi dễ thương đấy là <em>lightweight</em> :D</p>

<p>Hôm nay mình sẽ trình bày những vấn đề cơ bản nhất của Date để các bạn có được cái nhìn overview</p>

<h3 id="now">Now</h3>

<p>Lấy ra thời gian hiện tại đơn giản chỉ cần 1 dòng (local time)</p>

<blockquote>
<p>let now = Date()</p>
</blockquote>

<p>Tuy nhiên trong thực tế, không ai lấy ra local time của máy cả, vì user có thể cheat cái này :D. Chúng ta sẽ lấy current time của server trả về và convert date theo timezone của server.</p>

<p>Trong đối tượng <em>date</em> có 3 thuộc tính (tính bằng giây)</p>

<ul>
<li>timeIntervalSinceReferenceDate</li>
<li>timeIntervalSince1970</li>
<li>timeIntervalSinceNow</li>
</ul>

<p>Đi lần lượt theo thứ tự thì cái đầu tiên lấy time theo mốc 01-01-2001 00:00, cái thứ hai lấy theo mốc 01-01-1970, cái thứ ba lấy theo mốc hiện tại :D. Thuộc tính thời gian hay được sử dụng là <em>timeIntervalSince1970</em>, còn có tên gọi khác <em>epoch time</em> <a href="https://vi.wikipedia.org/wiki/Th%E1%BB%9Di_gian_Unix">tham khảo</a>.</p>

<h3 id="convert-time">Convert time</h3>

<p>Để convert đối tượng <em>Date</em> ta dùng <em>DateFormatter</em></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">    let dateFormatter <span style="color:#f92672">=</span> DateFormatter()
    dateFormatter.timeZone <span style="color:#f92672">=</span> TimeZone(abbreviation: TimeZone.current.abbreviation() <span style="color:#f92672">??</span> <span style="color:#e6db74">&#34;GMT+7&#34;</span>)
    dateFormatter.dateFormat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dd/MM/yyyy&#34;</span></code></pre></div>

<p><em>DateFormatter</em> giúp ta convert <em>Date</em> sang <em>String</em> và ngược lại. Để hiển thị date lên app ta sẽ gán <em>dateFormat</em> cho đối tượng <em>DateFormatter</em> được tạo ra như ở ví dụ trên. Định dạng date format là một string, ơn giời là nó đi theo chuẩn, tham khảo ở <a href="http://nsdateformatter.com/">http://nsdateformatter.com/</a>. Thường thì server sẽ trả về cho client string date theo định dạng nào đó, ta cần phải xác định đúng định dạng để đưa về kết quả mong muốn. Ta cũng không được quên gán timezone để đưa về mốc thời gian ta qui định. Túm váy lại có hai bước cần làm khi tạo <em>DateFormater</em></p>

<ul>
<li>Gắn timezone</li>
<li>Gắn dateFormat</li>
</ul>

<h3 id="what-is-the-date-today">What is the date today?</h3>

<p>Hôm nay là thứ mấy? Với <em>DateFormater</em> chúng ta có 1 trick để lấy ra thứ theo tiếng Anh.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">let dateFormatter <span style="color:#f92672">=</span> DateFormatter()
dateFormatter.dateFormat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;E&#34;</span> <span style="color:#75715e">// or &#34;EEEE&#34;
</span><span style="color:#75715e"></span>print(dateFormatter.string(from: now)) <span style="color:#f92672">//</span> Tue</code></pre></div>

<p>Kết quả trả về là thứ viết tắt theo tiếng Anh như mon, tue, wed&hellip;</p>

<p>Còn nếu muốn trả về thứ theo tiếng mẹ đẻ ta có thể làm như sau</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">Calendar.current.component(.weekday, from: self)</code></pre></div>

<p>Kết quả trả về là Int bắt đầu từ 1 tương ứng với chủ nhật (từ 1 chứ không phải từ 0 nhá)</p>

<h3 id="show-me-the-date">Show me the date</h3>

<p>Giả sử ta muốn lấy <em>Date</em> sau một giờ nữa chẳng hạn thì làm thế nào? Cách đơn giản nhất là</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">let now <span style="color:#f92672">=</span> Date()
let oneHourLater <span style="color:#f92672">=</span> now.addingTimeInterval(<span style="color:#ae81ff">60</span><span style="color:#f92672">*</span><span style="color:#ae81ff">60</span>) <span style="color:#f92672">//</span> time unit: second</code></pre></div>

<p>Thêm cách nữa sử dụng <em>DateComponents</em></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objc" data-lang="objc">let calendar <span style="color:#f92672">=</span> Calendar.current
let oneHourLater2 <span style="color:#f92672">=</span> calendar.date(byAdding: .hour, value: <span style="color:#ae81ff">1</span>, to: now)</code></pre></div>

<p>Để giản tiện, chúng ta có thể tạo <em>extension</em> như cách các thư viện thường dùng <a href="https://github.com/davedelong/Chronology/blob/master/Inspiration.md">tham khảo</a></p>

<p>Vậy cuối cùng <em>date</em> có ăn được không? mời mọi người thưởng thức <a href="https://gist.github.com/gg4acrossover/ed80aefc44700d03661aee09eaa1a156">source code</a> ví dụ trong bài để tự tìm ra câu trả lời :D.</p>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">VietHQ</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2017-11-06</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/hugosite/tags/swift/">swift</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/hugosite/post/codable-swift4/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Codable swift 4</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/hugosite/post/enum-swift/">
            <span class="next-text nav-default">Enum result</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'gg4acrossover';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:hoangquocviet1402@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/viet142" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.linkedin.com/in/viethoangquoc1402/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://github.com/gg4acrossover" class="iconfont icon-github" title="github"></a>
  <a href="https://gg4acrossover.github.io/hugosite/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">VietHQ</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/hugosite/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/hugosite/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/hugosite/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/hugosite/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/hugosite/dist/even.min.js?v=3.1.1"></script>








</body>
</html>
