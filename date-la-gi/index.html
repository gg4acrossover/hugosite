<!DOCTYPE html>
<html lang="vi-EN">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/agate.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99127158-1', 'auto');
    ga('send', 'pageview');

    </script>

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Date là gì, có ăn được không?"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@viet142"/>



  	<meta property="og:title" content="Date là gì, có ăn được không? &middot; GG4aCrossover" />
  	<meta property="og:site_name" content="GG4aCrossover" />
  	<meta property="og:url" content="https://gg4acrossover.github.io/hugosite/date-la-gi/" />

    
        
            <meta property="og:image" content="/hugosite/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-11-06T16:50:29&#43;07:00" />

    
    <meta property="article:tag" content="swift" />
    
    

    <title>Date là gì, có ăn được không? &middot; GG4aCrossover</title>

    
    <meta name="description" content="Date Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc. Làm việc " />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/hugosite/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/hugosite/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/hugosite/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/hugosite/css/nav.css" />

    

    

    
      
          <link href="/hugosite/index.xml" rel="alternate" type="application/rss+xml" title="GG4aCrossover" />
      
      
    
    <meta name="generator" content="Hugo 0.20.7" />

    <link rel="canonical" href="https://gg4acrossover.github.io/hugosite/date-la-gi/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": 
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "url": http://gg4acrossover.github.io/,
        "sameAs": [
            
            
             
             
             
             
             
            
        ],
        "description": Coder nhân dân
        
    },
    "headline": Date là gì, có ăn được không?,
    "name": Date là gì, có ăn được không?,
    "wordCount": 659,
    "timeRequired": "PT4M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://gg4acrossover.github.io/hugosite/date-la-gi/,
    "datePublished": 2017-11-06T16:50Z,
    "dateModified": 2017-11-06T16:50Z,
    
    "keywords": swift,
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://gg4acrossover.github.io/hugosite/date-la-gi/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/viet142">Twitter</a>
            </li>
        
            <h4>Social</h4>
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/gg4acrossover">Github</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/hugosite/about/">About me</a>
            </li>
        
            <h4>My Site</h4>
            <li class="nav-opened" role="presentation">
            	<a href="/hugosite/">Home</a>
            </li>
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/hugosite/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Date là gì, có ăn được không?</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-11-06T16:50:29&#43;07:00">
            Nov 6, 2017
          </time>
        
         
          <span class="post-tag small"><a href="https://gg4acrossover.github.io/hugosite/tags/swift/">#swift</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<h2 id="date">Date</h2>

<p>Date là một đối tượng gần như không thể thiếu trong các app hiện nay. Nó xuất hiện trong lịch, trong thương mại điện tử, trong các app nhắc việc.
Làm việc với date tưởng chừng như đơn giản nhưng lại là vấn đề hết sức đau đầu vì nó mang tính tương đối :D. Tỉ như ở Việt Nam, người dân đang vội vã đón con cuối chiều, nhưng ở nước khác, họ lại đang cafe buổi sáng. Phức tạp hơn, có những nước lớn, thời gian lại phân theo nhiều timezone khác nhau (Nga, Mỹ), đầu quốc gia một giờ, cuối quốc gia lại là một giờ khác. Oh my god!</p>

<p>IOS hỗ trợ làm việc với time tương đối tốt, thậm chí cũng đã có nhiều thư viện đơn giản hóa việc này. Tuy nhiên việc hiểu bản chất của <em>Date</em> cũng giúp bạn suy ra cách thức vận hành của thư viện hoặc có thể tự tạo cho mình một thư viện riêng phù hợp với yêu cầu. Chúng ta gọi dễ thương đấy là <em>lightweight</em> :D</p>

<p>Hôm nay mình sẽ trình bày những vấn đề cơ bản nhất của Date để các bạn có được cái nhìn overview</p>

<h3 id="now">Now</h3>

<p>Lấy ra thời gian hiện tại đơn giản chỉ cần 1 dòng (local time)</p>

<blockquote>
<p>let now = Date()</p>
</blockquote>

<p>Tuy nhiên trong thực tế, không ai lấy ra local time của máy cả, vì user có thể cheat cái này :D. Chúng ta sẽ lấy current time của server trả về và convert date theo timezone của server.</p>

<p>Trong đối tượng <em>date</em> có 3 thuộc tính (tính bằng giây)</p>

<ul>
<li>timeIntervalSinceReferenceDate</li>
<li>timeIntervalSince1970</li>
<li>timeIntervalSinceNow</li>
</ul>

<p>Đi lần lượt theo thứ tự thì cái đầu tiên lấy time theo mốc 01-01-2001 00:00, cái thứ hai lấy theo mốc 01-01-1970, cái thứ ba lấy theo mốc hiện tại :D. Thuộc tính thời gian hay được sử dụng là <em>timeIntervalSince1970</em>, còn có tên gọi khác <em>epoch time</em> <a href="https://vi.wikipedia.org/wiki/Th%E1%BB%9Di_gian_Unix">tham khảo</a>.</p>

<h3 id="convert-time">Convert time</h3>

<p>Để convert đối tượng <em>Date</em> ta dùng <em>DateFormatter</em></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">dateFormatter</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">DateFormatter()</span>
    <span style="color: #f8f8f2">dateFormatter.timeZone</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">TimeZone(abbreviation:</span> <span style="color: #f8f8f2">TimeZone.current.abbreviation()</span> <span style="color: #f92672">??</span> <span style="color: #e6db74">&quot;GMT+7&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">dateFormatter.dateFormat</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;dd/MM/yyyy&quot;</span>
</pre></div>


<p><em>DateFormatter</em> giúp ta convert <em>Date</em> sang <em>String</em> và ngược lại. Để hiển thị date lên app ta sẽ gán <em>dateFormat</em> cho đối tượng <em>DateFormatter</em> được tạo ra như ở ví dụ trên. Định dạng date format là một string, ơn giời là nó đi theo chuẩn, thể tham khảo ở <a href="http://nsdateformatter.com/">http://nsdateformatter.com/</a>. Thường thì server sẽ trả về cho client string date theo định dạng nào đó, ta cần phải xác định đúng định dạng để đưa về kết quả mong muốn. Chúng ta cũng không thể quên gán timezone để đưa về mốc thời gian ta qui định. Túm váy lại có hai bước cần làm khi tạo <em>DateFormater</em></p>

<ul>
<li>Gắn timezone</li>
<li>Gắn dateFormat</li>
</ul>

<h3 id="what-is-the-date-today">What is the date today?</h3>

<p>Hôm nay là thứ mấy? Với <em>DateFormater</em> chúng ta có 1 trick để lấy ra thứ theo tiếng Anh.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">dateFormatter</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">DateFormatter()</span>
<span style="color: #f8f8f2">dateFormatter.dateFormat</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;E&quot;</span> <span style="color: #75715e">// or &quot;EEEE&quot;</span>
<span style="color: #f8f8f2">print(dateFormatter.string(from:</span> <span style="color: #f8f8f2">now))</span> <span style="color: #75715e">// Tue</span>
</pre></div>


<p>Kết quả trả về là thứ viết tắt theo tiếng Anh như mon, tue, wed&hellip;</p>

<p>Còn nếu muốn trả về thứ theo tiếng mẹ đẻ ta có thể làm như sau</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">Calendar.current.component(.weekday,</span> <span style="color: #f8f8f2">from:</span> <span style="color: #f8f8f2">self)</span>
</pre></div>


<p>Kết quả trả về là Int bắt đầu từ 1 tương ứng với chủ nhật (từ 1 chứ không phải từ 0 nhá)</p>

<h3 id="show-me-the-date">Show me the date</h3>

<p>Giả sử ta muốn lấy <em>Date</em> sau một giờ nữa chẳng hạn thì làm thế nào? Cách đơn giản nhất là</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">now</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Date()</span>
<span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">oneHourLater</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">now.addingTimeInterval(</span><span style="color: #ae81ff">60</span><span style="color: #f92672">*</span><span style="color: #ae81ff">60</span><span style="color: #f8f8f2">)</span> <span style="color: #75715e">// time unit: second</span>
</pre></div>


<p>Thêm cách nữa sử dụng <em>DateComponents</em></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">calendar</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Calendar.current</span>
<span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">oneHourLater2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">calendar.date(byAdding:</span> <span style="color: #f8f8f2">.hour,</span> <span style="color: #f8f8f2">value:</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">to:</span> <span style="color: #f8f8f2">now)</span>
</pre></div>


<p>Để giản tiện, chúng ta có thể tạo <em>extension</em> như cách các thư viện thường dùng <a href="https://github.com/davedelong/Chronology/blob/master/Inspiration.md">tham khảo</a></p>

<p>Vậy cuối cùng <em>date</em> có ăn được không? mời mọi người thưởng thức <a href="https://gist.github.com/gg4acrossover/ed80aefc44700d03661aee09eaa1a156">source code</a> ví dụ trong bài để tự tìm ra câu trả lời :D.</p>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="https://gg4acrossover.github.io/hugosite/">GG4aCrossover</a></h4>
  
  <p>Coder nhân dân</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">HaNoi, VietNam</span>
    <span class="author-link icon-link"><a href="http://gg4acrossover.github.io/">http://gg4acrossover.github.io/</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Date%20l%c3%a0%20g%c3%ac%2c%20c%c3%b3%20%c4%83n%20%c4%91%c6%b0%e1%bb%a3c%20kh%c3%b4ng%3f&nbsp;-&nbsp;GG4aCrossover&amp;url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2fdate-la-gi%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2fdate-la-gi%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2fdate-la-gi%2f&amp;description=Date%20l%c3%a0%20g%c3%ac%2c%20c%c3%b3%20%c4%83n%20%c4%91%c6%b0%e1%bb%a3c%20kh%c3%b4ng%3f"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2fdate-la-gi%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'gg4acrossover';
  var disqus_url = 'https:\/\/gg4acrossover.github.io\/hugosite\/date-la-gi\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>


  <aside class="read-next">
  
  
      <a class="read-next-story prev" style="no-cover" href="/hugosite/enum-swift/">
          <section class="post">
              <h2>Enum result</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">GG4aCrossover</a> All rights reserved - 2016</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/hugosite/js/jquery.js"></script>
    <script type="text/javascript" src="/hugosite/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/hugosite/js/index.js"></script>
    
</body>
</html>

