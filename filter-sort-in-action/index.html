<!DOCTYPE html>
<html lang="vi-EN">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Filter, sort in action"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@viet142"/>



  	<meta property="og:title" content="Filter, sort in action &middot; GG4aCrossover" />
  	<meta property="og:site_name" content="GG4aCrossover" />
  	<meta property="og:url" content="https://gg4acrossover.github.io/hugosite/filter-sort-in-action/" />

    
        
            <meta property="og:image" content="/hugosite/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-07-03T14:53:55&#43;07:00" />

    
    <meta property="article:tag" content="ios" />
    
    <meta property="article:tag" content="swift 3" />
    
    

    <title>Filter, sort in action &middot; GG4aCrossover</title>

    
    <meta name="description" content="Back to basic Hồi học phổ thông, tôi rất ấn tượng với một thằng giải toán bằng định nghĩa. Hắn học chuyên toán tự nhiên, ngồi trên tôi một bàn, quả thực không k" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/hugosite/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/hugosite/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/hugosite/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/hugosite/css/nav.css" />

    

    

    
      
          <link href="/hugosite/index.xml" rel="alternate" type="application/rss+xml" title="GG4aCrossover" />
      
      
    
    <meta name="generator" content="Hugo 0.24.1" />

    <link rel="canonical" href="https://gg4acrossover.github.io/hugosite/filter-sort-in-action/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": 
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "url": http://gg4acrossover.github.io/,
        "sameAs": [
            
            
             
             
             
             
             
            
        ],
        "description": Coder nhân dân
        
    },
    "headline": Filter, sort in action,
    "name": Filter, sort in action,
    "wordCount": 470,
    "timeRequired": "PT3M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": https://gg4acrossover.github.io/hugosite/filter-sort-in-action/,
    "datePublished": 2017-07-03T14:53Z,
    "dateModified": 2017-07-03T14:53Z,
    
    "keywords": ios, swift 3,
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": https://gg4acrossover.github.io/hugosite/filter-sort-in-action/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/viet142">Twitter</a>
            </li>
        
            <h4>Social</h4>
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/gg4acrossover">Github</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/hugosite/about/">About me</a>
            </li>
        
            <h4>My Site</h4>
            <li class="nav-opened" role="presentation">
            	<a href="/hugosite/">Home</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/hugosite/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Filter, sort in action</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-07-03T14:53:55&#43;07:00">
            Jul 3, 2017
          </time>
        
         
          <span class="post-tag small"><a href="https://gg4acrossover.github.io/hugosite/tags/ios/">#ios</a></span>
         
          <span class="post-tag small"><a href="https://gg4acrossover.github.io/hugosite/tags/swift-3/">#swift 3</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<h3 id="back-to-basic">Back to basic</h3>

<p>Hồi học phổ thông, tôi rất ấn tượng với một thằng giải toán bằng định nghĩa. Hắn học chuyên toán tự nhiên, ngồi trên tôi một bàn, quả thực không khó để tôi liếc được bài :D. Một cách giải thật đặc biệt, xuất phát từ định nghĩa cơ bản, trong khi cách giải thông thường là dùng công thức. Về sau, khi làm lập trình, tôi càng thấm thía hơn những cách làm đơn giản kiểu như vậy.</p>

<p>Có thể nói, những kĩ thuật đơn giản, chúng ta hay bỏ quên, đôi khi lại đưa ra một cách giải hay, độc đáo. Hôm nay, tôi sẽ &ldquo;back to basic&rdquo; để xem lại các hướng giải quyết việc <strong>filter</strong> và <strong>sort</strong> trong Array.</p>

<h3 id="filter">Filter</h3>

<p>Giả sử ta có một mảng</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">listStr</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;quoc anh&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Hoang hai&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;hoàng giang&quot;</span><span style="color: #f8f8f2">,</span><span style="color: #e6db74">&quot;anh ngoc&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;quoc nguyen&quot;</span><span style="color: #f8f8f2">]</span>
</pre></div>


<p>Ta cần lọc ra những phần tử có chứa từ &ldquo;hoang&rdquo;. Ta có thể sử dụng những cách sau.</p>

<ul>
<li>Sử dụng <em>NSPredicate</em></li>
</ul>

<p>Trường hợp ta không phân biệt chữ hoa chữ thường ta có thể làm như sau</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">filterC</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NSPredicate(format:</span> <span style="color: #e6db74">&quot;self contains[c] %@&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">arrFilterC</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(listStr</span> <span style="color: #f8f8f2">as</span> <span style="color: #f8f8f2">NSArray).filtered(using:</span> <span style="color: #f8f8f2">filterC)</span> <span style="color: #75715e">// [&quot;Hoang hai&quot;]</span>
</pre></div>


<p>Trường hợp ta không phân biệt dấu</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">filterD</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NSPredicate(format:</span> <span style="color: #e6db74">&quot;self contains[d] %@&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">arrFilterD</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(listStr</span> <span style="color: #f8f8f2">as</span> <span style="color: #f8f8f2">NSArray).filtered(using:</span> <span style="color: #f8f8f2">filterD)</span> <span style="color: #75715e">// [&quot;hoàng giang&quot;]</span>
</pre></div>


<p>Nếu không cần phân biệt cả viết hoa, thường, cả dấu, ta có thể kết hợp điều kiện</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">filterD</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NSPredicate(format:</span> <span style="color: #e6db74">&quot;self contains[cd] %@&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>


<p>Về query format của NSPredicate, mọi người tham khảo thêm tại <a href="http://nshipster.com/nspredicate/">đây</a>.</p>

<ul>
<li>Sử dụng hàm filter của swift</li>
</ul>

<p>Cách trên là kế thừa di sản từ ObjC, bây giờ chúng ta sử dụng cách khác, gọn hơn và clear hơn.</p>

<p>Không phân biệt chữ hoa, chữ thường</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">filterStrC</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">listStr.filter</span> <span style="color: #f8f8f2">{</span> <span style="color: #960050; background-color: #1e0010">$</span><span style="color: #ae81ff">0.</span><span style="color: #f8f8f2">range(of:</span> <span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">options:</span> <span style="color: #f8f8f2">.caseInsensitive,</span> <span style="color: #f8f8f2">range:</span> <span style="color: #f8f8f2">nil,</span> <span style="color: #f8f8f2">locale:</span> <span style="color: #f8f8f2">nil)</span> <span style="color: #f92672">!=</span> <span style="color: #f8f8f2">nil</span> <span style="color: #f8f8f2">}</span>
</pre></div>


<p>Ngắn hơn có thể dùng cách sau</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">arrFilter</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">listStr.filter</span> <span style="color: #f8f8f2">{</span> <span style="color: #960050; background-color: #1e0010">$</span><span style="color: #ae81ff">0.</span><span style="color: #f8f8f2">localizedCaseInsensitiveContains(</span><span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">)}</span>
</pre></div>


<p>Không phân biệt dấu</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">filterStrD</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">listStr.filter</span> <span style="color: #f8f8f2">{</span> <span style="color: #960050; background-color: #1e0010">$</span><span style="color: #ae81ff">0.</span><span style="color: #f8f8f2">range(of:</span> <span style="color: #e6db74">&quot;hoang&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">options:</span> <span style="color: #f8f8f2">.diacriticInsensitive,</span> <span style="color: #f8f8f2">range:</span> <span style="color: #f8f8f2">nil,</span> <span style="color: #f8f8f2">locale:</span> <span style="color: #f8f8f2">nil)</span> <span style="color: #f92672">!=</span> <span style="color: #f8f8f2">nil</span> <span style="color: #f8f8f2">}</span>
</pre></div>


<h3 id="sort-theo-alphabet">Sort (theo Alphabet)</h3>

<ul>
<li>Sử dụng <em>ComparisonResult</em></li>
</ul>

<p>Trường hợp không phân biệt chữ hoa, chữ thường (Theo mã ascii)</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">arrPre</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(listStr</span> <span style="color: #f8f8f2">as</span> <span style="color: #f8f8f2">NSArray).sortedArray(comparator:</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">(s1</span> <span style="color: #f8f8f2">,s2)</span> <span style="color: #f92672">-&gt;</span> <span style="color: #f8f8f2">ComparisonResult</span> <span style="color: #66d9ef">in</span>
    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">x</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">s1</span> <span style="color: #f8f8f2">as</span><span style="color: #f92672">?</span> <span style="color: #f8f8f2">String,</span> <span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">y</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">s2</span> <span style="color: #f8f8f2">as</span><span style="color: #f92672">?</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">y.localizedCaseInsensitiveCompare(x)</span>
    <span style="color: #f8f8f2">}</span>
    
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ComparisonResult.orderedAscending</span>
<span style="color: #f8f8f2">})</span>
</pre></div>


<p>Kết quả nhận được như sau</p>

<blockquote>
<p>[&ldquo;quoc nguyen&rdquo;, &ldquo;quoc anh&rdquo;, &ldquo;Hoang hai&rdquo;, &ldquo;hoàng giang&rdquo;, &ldquo;anh ngoc&rdquo;]</p>
</blockquote>

<ul>
<li>Sử dụng <em>NSSortDescriptor</em></li>
</ul>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">sortDes</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NSSortDescriptor(key:</span> <span style="color: #f8f8f2">nil,</span> <span style="color: #f8f8f2">ascending:</span> <span style="color: #f8f8f2">false,</span> <span style="color: #f8f8f2">selector:</span> <span style="color: #960050; background-color: #1e0010">#</span><span style="color: #f8f8f2">selector(NSString.localizedCaseInsensitiveCompare))</span>
<span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">arrPre2</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(listStr</span> <span style="color: #f8f8f2">as</span> <span style="color: #f8f8f2">NSArray).sortedArray(using:</span> <span style="color: #f8f8f2">[sortDes])</span>
</pre></div>


<p>Kết quả cũng ra tương tự như trên</p>

<ul>
<li>Sử dụng hàm <em>sorted</em> của swift</li>
</ul>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">let</span> <span style="color: #f8f8f2">sortSimple</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">listStr.sorted</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #960050; background-color: #1e0010">$</span><span style="color: #ae81ff">1.</span><span style="color: #f8f8f2">localizedCaseInsensitiveCompare(</span><span style="color: #960050; background-color: #1e0010">$</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">.orderedAscending</span>
<span style="color: #f8f8f2">}</span>
</pre></div>


<h3 id="kết">Kết</h3>

<p>Tóm lại bằng một câu mà ai cũng biết :D</p>

<blockquote>
<p>Keep it simple</p>
</blockquote>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="https://gg4acrossover.github.io/hugosite/">GG4aCrossover</a></h4>
  
  <p>Coder nhân dân</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">HaNoi, VietNam</span>
    <span class="author-link icon-link"><a href="http://gg4acrossover.github.io/">http://gg4acrossover.github.io/</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Filter%2c%20sort%20in%20action&nbsp;-&nbsp;GG4aCrossover&amp;url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2ffilter-sort-in-action%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2ffilter-sort-in-action%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2ffilter-sort-in-action%2f&amp;description=Filter%2c%20sort%20in%20action"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fgg4acrossover.github.io%2fhugosite%2ffilter-sort-in-action%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'gg4acrossover';
  var disqus_url = 'https:\/\/gg4acrossover.github.io\/hugosite\/filter-sort-in-action\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>


  <aside class="read-next">
  
  
      <a class="read-next-story prev" style="no-cover" href="/hugosite/slim-tableview/">
          <section class="post">
              <h2>Slim tableview</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">GG4aCrossover</a> All rights reserved - 2016</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/hugosite/js/jquery.js"></script>
    <script type="text/javascript" src="/hugosite/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/hugosite/js/index.js"></script>
    
</body>
</html>

